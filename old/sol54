cat poker.txt|perl -MData::Dumper -ne '/(.{14}).(.{14})/;@s=([score($1)],[score($2)]);print">1\n" if comp(@s) > 0;BEGIN{%v=(2=>1,3=>2,4=>3,5=>4,6=>5,7=>6,8=>7,9=>8,T=>9,J=>10,Q=>11,K=>12,A=>13);%s=(D=>1,H=>2,C=>3,S=>4)};sub val{$_[0]=~/(.)(.)/;return[$v{$1},$s{$2}]}sub score{@a=split/ /,$_[0];@v=sort{$a->[0]<=>$b->[0]}map{val$_}@a;my@s;if(f(@v) && (&s(@v)==9)){@s=(9)}elsif(f(@v) && defined($s=&s(@v)) ){@s=(8,$s)}if(!@s){$d=d(@v);@a=sort{$d->{$b}<=>$d->{$a}}keys%$d;if($d->{$a[0]}==4){@s=(7,$a[0])}elsif($d->{$a[0]}==3&&$d->{$a[1]}==2){@s=(6,$a[0],$a[1])}}if(!@s && (&f(@v))){$s=5}elsif(!@s && ($s=&s(@v))){@s=(4,$s)}elsif(!@s && $d->{$a[0]}==3){@s=(3,$a[0])}elsif(!@s && $d->{$a[0]}==2 && $d->{$a[1]}==2){@s=(2, $a[0]>$a[1]?($a[0],$a[1]):($a[1],$a[0]))}elsif(!@s && $d->{$a[0]}==2){@s=(1,$a[0])}elsif(!@s){@s=(0)}return(@s,map{$_->[0]}@v[4,3,2,1,0])}sub f{for(0..4){return if$_[0][1]!=$_[$_][1]}return 1}sub s{$m=14;for(0..4){$m=$_[$_][0]if$_[$_][0]<$m}$m="0.0"if$m==1&&$v[4][0]==13;for$v(0..4){$t=($m==0?($v==4?0:$_[$v][0]!=$v+1):($_[$v][0]-($m+$v))!=0);return if$t}return $m}sub d{my$d={};for(0..4){$d->{$_[$_][0]}++}return$d}sub comp{for(0..$#{$_[0]}){return$_[0][$_]<=>$_[1][$_]if$_[0][$_]<=>$_[1][$_]}}'|wc -l
