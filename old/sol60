primes 1 100000000|perl -e '$d=0;@p=(2);sub isp{return if$_[0]==1;for$p(@p){return 1 if $_[0] == $p;return if $_[0]%$p==0}push@p,$_[0];return 1}while(<>){chomp;push@p,$_;$p{$_}=1}$t=4;@i=(5,4,3,2,1);while(1){$f=0;for$s(0..2*$t-1){$r1=$s<$t?0:$s-$t;$r2=$s<$t?$s:$t;for$a($r1..$r2){$b=$s-$a;next if$a==$b;if(!$p{$p[$i[$a]].$p[$i[$b]]}){print"$p[$i[$a]].$p[$i[$b]] is not prime (@p[@i]).\n"if$d;$f=1;$bad=$a>$b?$a:$b;last}else{print"$p[$i[$a]].$p[$i[$b]] is prime.\n"if$d}}last if$f}if(!$f){print"RESULT: @p[@i]\n";$bad=$t}for($bad+1..$t){$i[$_]=$t-$_+1}for(0..$bad){$i=$bad-$_;if($i[$i]==$i[$i-1]-1){$i[$i]=$i[$i+1]+1}else{$i[$i]++;last}}}'
